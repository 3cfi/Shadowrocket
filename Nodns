[General]
bypass-system = true
skip-proxy = 192.168.0.0/16, 10.0.0.0/8, 172.16.0.0/12, localhost, *.local, captive.apple.com
tun-excluded-routes = 10.0.0.0/8, 100.64.0.0/10, 127.0.0.0/8, 169.254.0.0/16, 172.16.0.0/12, 192.0.0.0/24, 192.0.2.0/24, 192.88.99.0/24, 192.168.0.0/16, 198.51.100.0/24, 203.0.113.0/24, 224.0.0.0/4, 255.255.255.255/32, 239.255.255.250/32
dns-server = 1.1.1.1, 8.8.8.8, 9.9.9.9, 1.0.0.1  # ä½¿ç”¨Cloudflareå’ŒGoogle DNS
ipv6 = false
prefer-ipv6 = false
dns-fallback-system = false
dns-direct-system = false
icmp-auto-reply = true
always-reject-url-rewrite = false
private-ip-answer = true
dns-direct-fallback-proxy = true
proxy-method = "auto"

# DNS é…ç½®
[DNS]
enable = true
prefer-h3 = true  # ä¼˜å…ˆä½¿ç”¨DoH3åè®®
default-nameserver = ['https://1.12.12.12/dns-query', 'https://223.5.5.5/dns-query']  # ä¸­å›½DNSè§£æ
nameserver = ['https://doh.apad.pro/dns-query', 'https://1.0.0.1/dns-query', 'https://208.67.222.222/dns-query']  # é€šç”¨DNSè§£æ
nameserver-policy = {
  '+.notion.com, +.notion.so, +.notion.site': 'tls://dns.jerryw.cn',  # Notionç›¸å…³åŸŸå
  'geosite:geolocation-!cn': ['https://doh.apad.pro/dns-query', 'https://1.0.0.1/dns-query', 'https://208.67.222.222/dns-query'],  # éä¸­å›½åŒºåŸŸæµé‡
}

# GEO æ•°æ®åŠ é€Ÿé…ç½®
geodata-mode = true
geo-auto-update = true
geo-update-interval = 24
geodata-loader = 'standard'
geox-url = {
  geoip: 'https://fastgh.lainbo.com/https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/geoip-lite.dat',
  geosite: 'https://fastgh.lainbo.com/https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/geosite.dat',
  mmdb: 'https://fastgh.lainbo.com/https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/country-lite.mmdb',
}

# è¿œç¨‹è§„åˆ™é›†ï¼ˆRule-Setï¼‰
[Rule]
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Google/Google.list, ğŸ¦´Google
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/GoogleVoice/GoogleVoice.list, ğŸ¦´Google
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Speedtest/Speedtest.list, Speedtest
RULE-SET,https://raw.githubusercontent.com/dler-io/Rules/main/Surge/Surge%203/Provider/Scholar.list, ğŸ“Scholar
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Apple/Apple_All_No_Resolve.list, ğŸApple
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Jetbrains/Jetbrains.list, ğŸˆProxy
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Docker/Docker.list, ğŸˆProxy
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Reddit/Reddit.list, ğŸˆProxy
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Microsoft/Microsoft.list, ğŸªŸMicrosoft
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/PayPal/PayPal.list, ğŸ’³PayPal
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Netflix/Netflix.list, ğŸ“ºNetflix
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Cloudflare/Cloudflare.list, ğŸˆProxy
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/WeChat/WeChat.list, DIRECT
RULE-SET,https://github.com/blackmatrix7/ios_rule_script/raw/master/rule/Surge/OpenAI/OpenAI.list, ğŸ¡OpenAI
RULE-SET,https://github.com/blackmatrix7/ios_rule_script/raw/master/rule/Surge/Telegram/Telegram.list, ğŸ’¬Telegram
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/GitHub/GitHub.list, ğŸ”¨Dev
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Twitter/Twitter.list, ğŸ¦Twitter
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Spotify/Spotify.list, ğŸµSpotify
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/TikTok/TikTok.list, ğŸŒ»TikTok
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Facebook/Facebook.list, ğŸˆProxy
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Whatsapp/Whatsapp.list, ğŸˆProxy
RULE-SET,https://github.com/blackmatrix7/ios_rule_script/raw/master/rule/Surge/GoogleFCM/GoogleFCM.list, ğŸˆProxy
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/YouTube/YouTube.list, ğŸˆProxy
# DOMAIN-SUFFIX è§„åˆ™
DOMAIN-SUFFIX,edu.cn, tailscale_3090_remote
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Proxy/Proxy.list, ğŸˆProxy
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/AppleProxy/AppleProxy.list, ğŸˆProxy
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/ChinaMedia/ChinaMedia.list, DIRECT
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/China/China.list, DIRECT
RULE-SET,https://raw.githubusercontent.com/VirgilClyne/GetSomeFries/main/ruleset/ASN.China.list, DIRECT
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Lan/Lan.list, DIRECT
GEOIP,CN, DIRECT  # ä¸­å›½å¤§é™†æµé‡ç›´è¿
FINAL, ğŸŸFinal, dns-failed  # DNSæŸ¥è¯¢å¤±è´¥å¤„ç†

[Proxy Group]
# Define Proxy Group with Speed Test
best_proxy = url-test, ["http://www.gstatic.com/generate_204", "https://www.cloudflare.com"], 3  # è‡ªåŠ¨é€‰æ‹©æœ€å¿«çš„ä»£ç†

# Fallback Proxy Group - è‡ªåŠ¨åˆ‡æ¢ä»£ç†
backup_proxy = fallback, [proxy1, proxy2], 5, 15  # å¦‚æœä»£ç†1å“åº”æ…¢äº5msï¼Œåˆ‡æ¢åˆ°ä»£ç†2

# Load Balancing Proxy Group - è´Ÿè½½å‡è¡¡
load_balanced_group = load-balance, [proxy1, proxy2, proxy3], 50  # åŠ¨æ€åˆ†é…æµé‡åˆ°å¤šä¸ªä»£ç†èŠ‚ç‚¹

[Host]
localhost = 127.0.0.1

[URL Rewrite]
^https?://(www.)?g.cn https://www.google.com 302
^https?://(www.)?google.cn https://www.google.com 302
